/*!
 * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(g,h){var m=Math,dummyStyle=h.createElement('div').style,vendor=(function(){var a='t,webkitT,MozT,msT,OT'.split(','),t,i=0,l=a.length;for(;i<l;i++){t=a[i]+'ransform';if(t in dummyStyle){return a[i].substr(0,a[i].length-1)}}return false})(),cssVendor=vendor?'-'+vendor.toLowerCase()+'-':'',transform=prefixStyle('transform'),transitionProperty=prefixStyle('transitionProperty'),transitionDuration=prefixStyle('transitionDuration'),transformOrigin=prefixStyle('transformOrigin'),transitionTimingFunction=prefixStyle('transitionTimingFunction'),transitionDelay=prefixStyle('transitionDelay'),isAndroid=(/android/gi).test(navigator.appVersion),isIDevice=(/iphone|ipad/gi).test(navigator.appVersion),isTouchPad=(/hp-tablet/gi).test(navigator.appVersion),has3d=prefixStyle('perspective')in dummyStyle,hasTouch='ontouchstart'in g&&!isTouchPad,hasTransform=vendor!==false,hasTransitionEnd=prefixStyle('transition')in dummyStyle,RESIZE_EV='onorientationchange'in g?'orientationchange':'resize',START_EV=hasTouch?'touchstart':'mousedown',MOVE_EV=hasTouch?'touchmove':'mousemove',END_EV=hasTouch?'touchend':'mouseup',CANCEL_EV=hasTouch?'touchcancel':'mouseup',TRNEND_EV=(function(){if(vendor===false)return false;var a={'':'transitionend','webkit':'webkitTransitionEnd','Moz':'transitionend','O':'otransitionend','ms':'MSTransitionEnd'};return a[vendor]})(),nextFrame=(function(){return g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||g.oRequestAnimationFrame||g.msRequestAnimationFrame||function(a){return setTimeout(a,1)}})(),cancelFrame=(function(){return g.cancelRequestAnimationFrame||g.webkitCancelAnimationFrame||g.webkitCancelRequestAnimationFrame||g.mozCancelRequestAnimationFrame||g.oCancelRequestAnimationFrame||g.msCancelRequestAnimationFrame||clearTimeout})(),translateZ=has3d?' translateZ(0)':'',iScroll=function(a,b){var c=this,i;c.wrapper=typeof a=='object'?a.parentNode:h.querySelector(a).parentNode;c.wrapper.style.overflow='hidden';c.scroller=c.wrapper.children[0];c.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:isAndroid,hideScrollbar:isIDevice,fadeScrollbar:isIDevice&&has3d,scrollbarClass:'',zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:'scroll',snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(i in b)c.options[i]=b[i];c.x=c.options.x;c.y=c.options.y;c.options.useTransform=hasTransform&&c.options.useTransform;c.options.hScrollbar=c.options.hScroll&&c.options.hScrollbar;c.options.vScrollbar=c.options.vScroll&&c.options.vScrollbar;c.options.zoom=c.options.useTransform&&c.options.zoom;c.options.useTransition=hasTransitionEnd&&c.options.useTransition;if(c.options.zoom&&isAndroid){translateZ=''}c.scroller.style[transitionProperty]=c.options.useTransform?cssVendor+'transform':'top left';c.scroller.style[transitionDuration]='0';c.scroller.style[transformOrigin]='0 0';if(c.options.useTransition)c.scroller.style[transitionTimingFunction]='cubic-bezier(0.33,0.66,0.66,1)';if(c.options.useTransform)c.scroller.style[transform]='translate('+c.x+'px,'+c.y+'px)'+translateZ;else c.scroller.style.cssText+=';position:absolute;top:'+c.y+'px;left:'+c.x+'px';if(c.options.useTransition)c.options.fixedScrollbar=true;c.refresh();c._bind(RESIZE_EV,g);c._bind(START_EV);if(!hasTouch){if(c.options.wheelAction!='none'){c._bind('DOMMouseScroll');c._bind('mousewheel')}}if(c.options.checkDOMChanges)c.checkDOMTime=setInterval(function(){c._checkDOMChanges()},500)};iScroll.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var a=this;switch(e.type){case START_EV:if(!hasTouch&&e.button!==0)return;if(e.target.tagName==="TEXTAREA")return;if(e.target.tagName==="INPUT")return;if(e.target.tagName==="SELECT")return;a._start(e);break;case MOVE_EV:a._move(e);break;case END_EV:case CANCEL_EV:a._end(e);break;case RESIZE_EV:a._resize();break;case'DOMMouseScroll':case'mousewheel':a._wheel(e);break;case TRNEND_EV:a._transitionEnd(e);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale))return;this.refresh()},_scrollbar:function(a){var b=this,bar;if(!b[a+'Scrollbar']){if(b[a+'ScrollbarWrapper']){if(hasTransform)b[a+'ScrollbarIndicator'].style[transform]='';b[a+'ScrollbarWrapper'].parentNode.removeChild(b[a+'ScrollbarWrapper']);b[a+'ScrollbarWrapper']=null;b[a+'ScrollbarIndicator']=null}return}if(!b[a+'ScrollbarWrapper']){bar=h.createElement('div');if(b.options.scrollbarClass)bar.className=b.options.scrollbarClass+a.toUpperCase();else bar.style.cssText='position:absolute;z-index:100;'+(a=='h'?'height:7px;bottom:1px;left:2px;right:'+(b.vScrollbar?'7':'2')+'px':'width:7px;bottom:'+(b.hScrollbar?'7':'2')+'px;top:2px;right:1px');bar.style.cssText+=';pointer-events:none;'+cssVendor+'transition-property:opacity;'+cssVendor+'transition-duration:'+(b.options.fadeScrollbar?'350ms':'0')+';overflow:hidden;opacity:'+(b.options.hideScrollbar?'0':'1');b.wrapper.appendChild(bar);b[a+'ScrollbarWrapper']=bar;bar=h.createElement('div');if(!b.options.scrollbarClass){bar.style.cssText='position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);'+cssVendor+'background-clip:padding-box;'+cssVendor+'box-sizing:border-box;'+(a=='h'?'height:100%':'width:100%')+';'+cssVendor+'border-radius:3px;border-radius:3px'}bar.style.cssText+=';pointer-events:none;'+cssVendor+'transition-property:'+cssVendor+'transform;'+cssVendor+'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);'+cssVendor+'transition-duration:0;'+cssVendor+'transform: translate(0,0)'+translateZ;if(b.options.useTransition)bar.style.cssText+=';'+cssVendor+'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)';b[a+'ScrollbarWrapper'].appendChild(bar);b[a+'ScrollbarIndicator']=bar}if(a=='h'){b.hScrollbarSize=b.hScrollbarWrapper.clientWidth;b.hScrollbarIndicatorSize=m.max(m.round(b.hScrollbarSize*b.hScrollbarSize/b.scrollerW),8);b.hScrollbarIndicator.style.width=b.hScrollbarIndicatorSize+'px';b.hScrollbarMaxScroll=b.hScrollbarSize-b.hScrollbarIndicatorSize;b.hScrollbarProp=b.hScrollbarMaxScroll/b.maxScrollX}else{b.vScrollbarSize=b.vScrollbarWrapper.clientHeight;b.vScrollbarIndicatorSize=m.max(m.round(b.vScrollbarSize*b.vScrollbarSize/b.scrollerH),8);b.vScrollbarIndicator.style.height=b.vScrollbarIndicatorSize+'px';b.vScrollbarMaxScroll=b.vScrollbarSize-b.vScrollbarIndicatorSize;b.vScrollbarProp=b.vScrollbarMaxScroll/b.maxScrollY}b._scrollbarPos(a,true)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},isAndroid?200:0)},_pos:function(x,y){if(this.zoomed)return;x=this.hScroll?x:0;y=this.vScroll?y:0;if(this.options.useTransform){this.scroller.style[transform]='translate('+x+'px,'+y+'px) scale('+this.scale+')'+translateZ}else{x=m.round(x);y=m.round(y);this.scroller.style.left=x+'px';this.scroller.style.top=y+'px'}this.x=x;this.y=y;this._scrollbarPos('h');this._scrollbarPos('v')},_scrollbarPos:function(a,b){var c=this,pos=a=='h'?c.x:c.y,size;if(!c[a+'Scrollbar'])return;pos=c[a+'ScrollbarProp']*pos;if(pos<0){if(!c.options.fixedScrollbar){size=c[a+'ScrollbarIndicatorSize']+m.round(pos*3);if(size<8)size=8;c[a+'ScrollbarIndicator'].style[a=='h'?'width':'height']=size+'px'}pos=0}else if(pos>c[a+'ScrollbarMaxScroll']){if(!c.options.fixedScrollbar){size=c[a+'ScrollbarIndicatorSize']-m.round((pos-c[a+'ScrollbarMaxScroll'])*3);if(size<8)size=8;c[a+'ScrollbarIndicator'].style[a=='h'?'width':'height']=size+'px';pos=c[a+'ScrollbarMaxScroll']+(c[a+'ScrollbarIndicatorSize']-size)}else{pos=c[a+'ScrollbarMaxScroll']}}c[a+'ScrollbarWrapper'].style[transitionDelay]='0';c[a+'ScrollbarWrapper'].style.opacity=b&&c.options.hideScrollbar?'0':'1';c[a+'ScrollbarIndicator'].style[transform]='translate('+(a=='h'?pos+'px,0)':'0,'+pos+'px)')+translateZ},_start:function(e){var a=this,point=hasTouch?e.touches[0]:e,matrix,x,y,c1,c2;if(!a.enabled)return;if(a.options.onBeforeScrollStart)a.options.onBeforeScrollStart.call(a,e);if(a.options.useTransition||a.options.zoom)a._transitionTime(0);a.moved=false;a.animating=false;a.zoomed=false;a.distX=0;a.distY=0;a.absDistX=0;a.absDistY=0;a.dirX=0;a.dirY=0;if(a.options.zoom&&hasTouch&&e.touches.length>1){c1=m.abs(e.touches[0].pageX-e.touches[1].pageX);c2=m.abs(e.touches[0].pageY-e.touches[1].pageY);a.touchesDistStart=m.sqrt(c1*c1+c2*c2);a.originX=m.abs(e.touches[0].pageX+e.touches[1].pageX-a.wrapperOffsetLeft*2)/2-a.x;a.originY=m.abs(e.touches[0].pageY+e.touches[1].pageY-a.wrapperOffsetTop*2)/2-a.y;if(a.options.onZoomStart)a.options.onZoomStart.call(a,e)}if(a.options.momentum){if(a.options.useTransform){matrix=getComputedStyle(a.scroller,null)[transform].replace(/[^0-9\-.,]/g,'').split(',');x=+(matrix[12]||matrix[4]);y=+(matrix[13]||matrix[5])}else{x=+getComputedStyle(a.scroller,null).left.replace(/[^0-9-]/g,'');y=+getComputedStyle(a.scroller,null).top.replace(/[^0-9-]/g,'')}if(x!=a.x||y!=a.y){if(a.options.useTransition)a._unbind(TRNEND_EV);else cancelFrame(a.aniTime);a.steps=[];a._pos(x,y);if(a.options.onScrollEnd)a.options.onScrollEnd.call(a)}}a.absStartX=a.x;a.absStartY=a.y;a.startX=a.x;a.startY=a.y;a.pointX=point.pageX;a.pointY=point.pageY;a.startTime=e.timeStamp||Date.now();if(a.options.onScrollStart)a.options.onScrollStart.call(a,e);a._bind(MOVE_EV,g);a._bind(END_EV,g);a._bind(CANCEL_EV,g)},_move:function(e){var a=this,point=hasTouch?e.touches[0]:e,deltaX=point.pageX-a.pointX,deltaY=point.pageY-a.pointY,newX=a.x+deltaX,newY=a.y+deltaY,c1,c2,scale,timestamp=e.timeStamp||Date.now();if(a.options.onBeforeScrollMove)a.options.onBeforeScrollMove.call(a,e);if(a.options.zoom&&hasTouch&&e.touches.length>1){c1=m.abs(e.touches[0].pageX-e.touches[1].pageX);c2=m.abs(e.touches[0].pageY-e.touches[1].pageY);a.touchesDist=m.sqrt(c1*c1+c2*c2);a.zoomed=true;scale=1/a.touchesDistStart*a.touchesDist*this.scale;if(scale<a.options.zoomMin)scale=0.5*a.options.zoomMin*Math.pow(2.0,scale/a.options.zoomMin);else if(scale>a.options.zoomMax)scale=2.0*a.options.zoomMax*Math.pow(0.5,a.options.zoomMax/scale);a.lastScale=scale/this.scale;newX=this.originX-this.originX*a.lastScale+this.x;newY=this.originY-this.originY*a.lastScale+this.y;this.scroller.style[transform]='translate('+newX+'px,'+newY+'px) scale('+scale+')'+translateZ;if(a.options.onZoom)a.options.onZoom.call(a,e);return}a.pointX=point.pageX;a.pointY=point.pageY;if(newX>0||newX<a.maxScrollX){newX=a.options.bounce?a.x+(deltaX/2):newX>=0||a.maxScrollX>=0?0:a.maxScrollX}if(newY>a.minScrollY||newY<a.maxScrollY){newY=a.options.bounce?a.y+(deltaY/2):newY>=a.minScrollY||a.maxScrollY>=0?a.minScrollY:a.maxScrollY}a.distX+=deltaX;a.distY+=deltaY;a.absDistX=m.abs(a.distX);a.absDistY=m.abs(a.distY);if(a.absDistX<6&&a.absDistY<6){return}if(a.options.lockDirection){if(a.absDistX>a.absDistY+5){newY=a.y;deltaY=0}else if(a.absDistY>a.absDistX+5){newX=a.x;deltaX=0}}a.moved=true;a._pos(newX,newY);a.dirX=deltaX>0?-1:deltaX<0?1:0;a.dirY=deltaY>0?-1:deltaY<0?1:0;if(timestamp-a.startTime>300){a.startTime=timestamp;a.startX=a.x;a.startY=a.y}if(a.options.onScrollMove)a.options.onScrollMove.call(a,e)},_end:function(e){if(hasTouch&&e.touches.length!==0)return;var a=this,point=hasTouch?e.changedTouches[0]:e,target,ev,momentumX={dist:0,time:0},momentumY={dist:0,time:0},duration=(e.timeStamp||Date.now())-a.startTime,newPosX=a.x,newPosY=a.y,distX,distY,newDuration,snap,scale;a._unbind(MOVE_EV,g);a._unbind(END_EV,g);a._unbind(CANCEL_EV,g);if(a.options.onBeforeScrollEnd)a.options.onBeforeScrollEnd.call(a,e);if(a.zoomed){scale=a.scale*a.lastScale;scale=Math.max(a.options.zoomMin,scale);scale=Math.min(a.options.zoomMax,scale);a.lastScale=scale/a.scale;a.scale=scale;a.x=a.originX-a.originX*a.lastScale+a.x;a.y=a.originY-a.originY*a.lastScale+a.y;a.scroller.style[transitionDuration]='200ms';a.scroller.style[transform]='translate('+a.x+'px,'+a.y+'px) scale('+a.scale+')'+translateZ;a.zoomed=false;a.refresh();if(a.options.onZoomEnd)a.options.onZoomEnd.call(a,e);return}if(!a.moved){if(hasTouch){if(a.doubleTapTimer&&a.options.zoom){clearTimeout(a.doubleTapTimer);a.doubleTapTimer=null;if(a.options.onZoomStart)a.options.onZoomStart.call(a,e);a.zoom(a.pointX,a.pointY,a.scale==1?a.options.doubleTapZoom:1);if(a.options.onZoomEnd){setTimeout(function(){a.options.onZoomEnd.call(a,e)},200)}}else if(this.options.handleClick){a.doubleTapTimer=setTimeout(function(){a.doubleTapTimer=null;target=point.target;while(target.nodeType!=1)target=target.parentNode;if(target.tagName!='SELECT'&&target.tagName!='INPUT'&&target.tagName!='TEXTAREA'){ev=h.createEvent('MouseEvents');ev.initMouseEvent('click',true,true,e.view,1,point.screenX,point.screenY,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);ev._fake=true;target.dispatchEvent(ev)}},a.options.zoom?250:0)}}a._resetPos(400);if(a.options.onTouchEnd)a.options.onTouchEnd.call(a,e);return}if(duration<300&&a.options.momentum){momentumX=newPosX?a._momentum(newPosX-a.startX,duration,-a.x,a.scrollerW-a.wrapperW+a.x,a.options.bounce?a.wrapperW:0):momentumX;momentumY=newPosY?a._momentum(newPosY-a.startY,duration,-a.y,(a.maxScrollY<0?a.scrollerH-a.wrapperH+a.y-a.minScrollY:0),a.options.bounce?a.wrapperH:0):momentumY;newPosX=a.x+momentumX.dist;newPosY=a.y+momentumY.dist;if((a.x>0&&newPosX>0)||(a.x<a.maxScrollX&&newPosX<a.maxScrollX))momentumX={dist:0,time:0};if((a.y>a.minScrollY&&newPosY>a.minScrollY)||(a.y<a.maxScrollY&&newPosY<a.maxScrollY))momentumY={dist:0,time:0}}if(momentumX.dist||momentumY.dist){newDuration=m.max(m.max(momentumX.time,momentumY.time),10);if(a.options.snap){distX=newPosX-a.absStartX;distY=newPosY-a.absStartY;if(m.abs(distX)<a.options.snapThreshold&&m.abs(distY)<a.options.snapThreshold){a.scrollTo(a.absStartX,a.absStartY,200)}else{snap=a._snap(newPosX,newPosY);newPosX=snap.x;newPosY=snap.y;newDuration=m.max(snap.time,newDuration)}}a.scrollTo(m.round(newPosX),m.round(newPosY),newDuration);if(a.options.onTouchEnd)a.options.onTouchEnd.call(a,e);return}if(a.options.snap){distX=newPosX-a.absStartX;distY=newPosY-a.absStartY;if(m.abs(distX)<a.options.snapThreshold&&m.abs(distY)<a.options.snapThreshold)a.scrollTo(a.absStartX,a.absStartY,200);else{snap=a._snap(a.x,a.y);if(snap.x!=a.x||snap.y!=a.y)a.scrollTo(snap.x,snap.y,snap.time)}if(a.options.onTouchEnd)a.options.onTouchEnd.call(a,e);return}a._resetPos(200);if(a.options.onTouchEnd)a.options.onTouchEnd.call(a,e)},_resetPos:function(a){var b=this,resetX=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,resetY=b.y>=b.minScrollY||b.maxScrollY>0?b.minScrollY:b.y<b.maxScrollY?b.maxScrollY:b.y;if(resetX==b.x&&resetY==b.y){if(b.moved){b.moved=false;if(b.options.onScrollEnd)b.options.onScrollEnd.call(b)}if(b.hScrollbar&&b.options.hideScrollbar){if(vendor=='webkit')b.hScrollbarWrapper.style[transitionDelay]='300ms';b.hScrollbarWrapper.style.opacity='0'}if(b.vScrollbar&&b.options.hideScrollbar){if(vendor=='webkit')b.vScrollbarWrapper.style[transitionDelay]='300ms';b.vScrollbarWrapper.style.opacity='0'}return}b.scrollTo(resetX,resetY,a||0)},_wheel:function(e){var a=this,wheelDeltaX,wheelDeltaY,deltaX,deltaY,deltaScale;if('wheelDeltaX'in e){wheelDeltaX=e.wheelDeltaX/12;wheelDeltaY=e.wheelDeltaY/12}else if('wheelDelta'in e){wheelDeltaX=wheelDeltaY=e.wheelDelta/12}else if('detail'in e){wheelDeltaX=wheelDeltaY=-e.detail*3}else{return}if(a.options.wheelAction=='zoom'){deltaScale=a.scale*Math.pow(2,1/3*(wheelDeltaY?wheelDeltaY/Math.abs(wheelDeltaY):0));if(deltaScale<a.options.zoomMin)deltaScale=a.options.zoomMin;if(deltaScale>a.options.zoomMax)deltaScale=a.options.zoomMax;if(deltaScale!=a.scale){if(!a.wheelZoomCount&&a.options.onZoomStart)a.options.onZoomStart.call(a,e);a.wheelZoomCount++;a.zoom(e.pageX,e.pageY,deltaScale,400);setTimeout(function(){a.wheelZoomCount--;if(!a.wheelZoomCount&&a.options.onZoomEnd)a.options.onZoomEnd.call(a,e)},400)}return}deltaX=a.x+wheelDeltaX;deltaY=a.y+wheelDeltaY;if(deltaX>0)deltaX=0;else if(deltaX<a.maxScrollX)deltaX=a.maxScrollX;if(deltaY>a.minScrollY)deltaY=a.minScrollY;else if(deltaY<a.maxScrollY)deltaY=a.maxScrollY;if(a.maxScrollY<0){a.scrollTo(deltaX,deltaY,0)}},_transitionEnd:function(e){var a=this;if(e.target!=a.scroller)return;a._unbind(TRNEND_EV);a._startAni()},_startAni:function(){var b=this,startX=b.x,startY=b.y,startTime=Date.now(),step,easeOut,animate;if(b.animating)return;if(!b.steps.length){b._resetPos(400);return}step=b.steps.shift();if(step.x==startX&&step.y==startY)step.time=0;b.animating=true;b.moved=true;if(b.options.useTransition){b._transitionTime(step.time);b._pos(step.x,step.y);b.animating=false;if(step.time)b._bind(TRNEND_EV);else b._resetPos(0);return}animate=function(){var a=Date.now(),newX,newY;if(a>=startTime+step.time){b._pos(step.x,step.y);b.animating=false;if(b.options.onAnimationEnd)b.options.onAnimationEnd.call(b);b._startAni();return}a=(a-startTime)/step.time-1;easeOut=m.sqrt(1-a*a);newX=(step.x-startX)*easeOut+startX;newY=(step.y-startY)*easeOut+startY;b._pos(newX,newY);if(b.animating)b.aniTime=nextFrame(animate)};animate()},_transitionTime:function(a){a+='ms';this.scroller.style[transitionDuration]=a;if(this.hScrollbar)this.hScrollbarIndicator.style[transitionDuration]=a;if(this.vScrollbar)this.vScrollbarIndicator.style[transitionDuration]=a},_momentum:function(a,b,c,d,e){var f=0.0006,speed=m.abs(a)/b,newDist=(speed*speed)/(2*f),newTime=0,outsideDist=0;if(a>0&&newDist>c){outsideDist=e/(6/(newDist/speed*f));c=c+outsideDist;speed=speed*c/newDist;newDist=c}else if(a<0&&newDist>d){outsideDist=e/(6/(newDist/speed*f));d=d+outsideDist;speed=speed*d/newDist;newDist=d}newDist=newDist*(a<0?-1:1);newTime=speed/f;return{dist:newDist,time:m.round(newTime)}},_offset:function(a){var b=-a.offsetLeft,top=-a.offsetTop;while(a=a.offsetParent){b-=a.offsetLeft;top-=a.offsetTop}if(a!=this.wrapper){b*=this.scale;top*=this.scale}return{left:b,top:top}},_snap:function(x,y){var a=this,i,l,page,time,sizeX,sizeY;page=a.pagesX.length-1;for(i=0,l=a.pagesX.length;i<l;i++){if(x>=a.pagesX[i]){page=i;break}}if(page==a.currPageX&&page>0&&a.dirX<0)page--;x=a.pagesX[page];sizeX=m.abs(x-a.pagesX[a.currPageX]);sizeX=sizeX?m.abs(a.x-x)/sizeX*500:0;a.currPageX=page;page=a.pagesY.length-1;for(i=0;i<page;i++){if(y>=a.pagesY[i]){page=i;break}}if(page==a.currPageY&&page>0&&a.dirY<0)page--;y=a.pagesY[page];sizeY=m.abs(y-a.pagesY[a.currPageY]);sizeY=sizeY?m.abs(a.y-y)/sizeY*500:0;a.currPageY=page;time=m.round(m.max(sizeX,sizeY))||200;return{x:x,y:y,time:time}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var a=this;a.scroller.style[transform]='';a.hScrollbar=false;a.vScrollbar=false;a._scrollbar('h');a._scrollbar('v');a._unbind(RESIZE_EV,g);a._unbind(START_EV);a._unbind(MOVE_EV,g);a._unbind(END_EV,g);a._unbind(CANCEL_EV,g);if(!a.options.hasTouch){a._unbind('DOMMouseScroll');a._unbind('mousewheel')}if(a.options.useTransition)a._unbind(TRNEND_EV);if(a.options.checkDOMChanges)clearInterval(a.checkDOMTime);if(a.options.onDestroy)a.options.onDestroy.call(a)},refresh:function(){var a=this,offset,i,l,els,pos=0,page=0;if(a.scale<a.options.zoomMin)a.scale=a.options.zoomMin;a.wrapperW=a.wrapper.clientWidth||1;a.wrapperH=a.wrapper.clientHeight||1;a.minScrollY=-a.options.topOffset||0;a.scrollerW=m.round(a.scroller.offsetWidth*a.scale);a.scrollerH=m.round((a.scroller.offsetHeight+a.minScrollY)*a.scale);a.maxScrollX=a.wrapperW-a.scrollerW;a.maxScrollY=a.wrapperH-a.scrollerH+a.minScrollY;a.dirX=0;a.dirY=0;if(a.options.onRefresh)a.options.onRefresh.call(a);a.hScroll=a.options.hScroll&&a.maxScrollX<0;a.vScroll=a.options.vScroll&&(!a.options.bounceLock&&!a.hScroll||a.scrollerH>a.wrapperH);a.hScrollbar=a.hScroll&&a.options.hScrollbar;a.vScrollbar=a.vScroll&&a.options.vScrollbar&&a.scrollerH>a.wrapperH;offset=a._offset(a.wrapper);a.wrapperOffsetLeft=-offset.left;a.wrapperOffsetTop=-offset.top;if(typeof a.options.snap=='string'){a.pagesX=[];a.pagesY=[];els=a.scroller.querySelectorAll(a.options.snap);for(i=0,l=els.length;i<l;i++){pos=a._offset(els[i]);pos.left+=a.wrapperOffsetLeft;pos.top+=a.wrapperOffsetTop;a.pagesX[i]=pos.left<a.maxScrollX?a.maxScrollX:pos.left*a.scale;a.pagesY[i]=pos.top<a.maxScrollY?a.maxScrollY:pos.top*a.scale}}else if(a.options.snap){a.pagesX=[];while(pos>=a.maxScrollX){a.pagesX[page]=pos;pos=pos-a.wrapperW;page++}if(a.maxScrollX%a.wrapperW)a.pagesX[a.pagesX.length]=a.maxScrollX-a.pagesX[a.pagesX.length-1]+a.pagesX[a.pagesX.length-1];pos=0;page=0;a.pagesY=[];while(pos>=a.maxScrollY){a.pagesY[page]=pos;pos=pos-a.wrapperH;page++}if(a.maxScrollY%a.wrapperH)a.pagesY[a.pagesY.length]=a.maxScrollY-a.pagesY[a.pagesY.length-1]+a.pagesY[a.pagesY.length-1]}a._scrollbar('h');a._scrollbar('v');if(!a.zoomed){a.scroller.style[transitionDuration]='0';a._resetPos(400)}},scrollTo:function(x,y,a,b){var c=this,step=x,i,l;c.stop();if(!step.length)step=[{x:x,y:y,time:a,relative:b}];for(i=0,l=step.length;i<l;i++){if(step[i].relative){step[i].x=c.x-step[i].x;step[i].y=c.y-step[i].y}c.steps.push({x:step[i].x,y:step[i].y,time:step[i].time||0})}c._startAni()},scrollToElement:function(a,b){var c=this,pos;a=a.nodeType?a:c.scroller.querySelector(a);if(!a)return;pos=c._offset(a);pos.left+=c.wrapperOffsetLeft;pos.top+=c.wrapperOffsetTop;pos.left=pos.left>0?0:pos.left<c.maxScrollX?c.maxScrollX:pos.left;pos.top=pos.top>c.minScrollY?c.minScrollY:pos.top<c.maxScrollY?c.maxScrollY:pos.top;b=b===undefined?m.max(m.abs(pos.left)*2,m.abs(pos.top)*2):b;c.scrollTo(pos.left,pos.top,b)},scrollToPage:function(a,b,c){var d=this,x,y;c=c===undefined?400:c;if(d.options.onScrollStart)d.options.onScrollStart.call(d);if(d.options.snap){a=a=='next'?d.currPageX+1:a=='prev'?d.currPageX-1:a;b=b=='next'?d.currPageY+1:b=='prev'?d.currPageY-1:b;a=a<0?0:a>d.pagesX.length-1?d.pagesX.length-1:a;b=b<0?0:b>d.pagesY.length-1?d.pagesY.length-1:b;d.currPageX=a;d.currPageY=b;x=d.pagesX[a];y=d.pagesY[b]}else{x=-d.wrapperW*a;y=-d.wrapperH*b;if(x<d.maxScrollX)x=d.maxScrollX;if(y<d.maxScrollY)y=d.maxScrollY}d.scrollTo(x,y,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(MOVE_EV,g);this._unbind(END_EV,g);this._unbind(CANCEL_EV,g)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition)this._unbind(TRNEND_EV);else cancelFrame(this.aniTime);this.steps=[];this.moved=false;this.animating=false},zoom:function(x,y,a,b){var c=this,relScale=a/c.scale;if(!c.options.useTransform)return;c.zoomed=true;b=b===undefined?200:b;x=x-c.wrapperOffsetLeft-c.x;y=y-c.wrapperOffsetTop-c.y;c.x=x-x*relScale+c.x;c.y=y-y*relScale+c.y;c.scale=a;c.refresh();c.x=c.x>0?0:c.x<c.maxScrollX?c.maxScrollX:c.x;c.y=c.y>c.minScrollY?c.minScrollY:c.y<c.maxScrollY?c.maxScrollY:c.y;c.scroller.style[transitionDuration]=b+'ms';c.scroller.style[transform]='translate('+c.x+'px,'+c.y+'px) scale('+a+')'+translateZ;c.zoomed=false},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};function prefixStyle(a){if(vendor==='')return a;a=a.charAt(0).toUpperCase()+a.substr(1);return vendor+a}dummyStyle=null;if(typeof exports!=='undefined')exports.iScroll=iScroll;else g.iScroll=iScroll})(window,document);